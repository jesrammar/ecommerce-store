{% extends "base.html" %}
{% block title %}Mi perfil{% endblock %}
{% block content %}
<h1 class="mb-3">Mi perfil</h1>
<form method="post" class="card card-body mb-4">
  {% csrf_token %}
  {{ form.as_p }}
  <button class="btn btn-primary">Guardar</button>
</form>

<h2 class="h5">Direcciones</h2>
<a class="btn btn-sm btn-outline-success mb-2" href="{% url 'accounts:address_create' %}">Añadir dirección</a>

<ul class="list-group">
  {% for d in direcciones %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <span>
        {{ d.nombre }} — {{ d.linea1 }}{% if d.linea2 %}, {{ d.linea2 }}{% endif %}, {{ d.ciudad }} ({{ d.cp }})
        {% if d.es_predeterminada %}<span class="badge text-bg-secondary ms-2">Predeterminada</span>{% endif %}
      </span>
      <span class="btn-group">
        <a class="btn btn-sm btn-outline-primary" href="{% url 'accounts:address_edit' d.pk %}">Editar</a>
        <a class="btn btn-sm btn-outline-secondary" href="{% url 'accounts:address_make_default' d.pk %}">Predeterminada</a>
        <a class="btn btn-sm btn-outline-danger" href="{% url 'accounts:address_delete' d.pk %}">Eliminar</a>
      </span>
    </li>
  {% empty %}
    <li class="list-group-item">Sin direcciones aún.</li>
  {% endfor %}
</ul>
{% endblock %}
