{% extends "base.html" %}
{% block title %}Pago con tarjeta{% endblock %}
{% block content %}
<h1 class="h3 mb-3">Pago con tarjeta</h1>

{% if modo_demo %}
  <div class="alert alert-warning">
    Stripe no está configurado. Esto es una pantalla de demostración.
  </div>
  <p>Pedido #{{ pedido.id }} — Total: {{ pedido.total }} {{ MONEDA|default:"€" }}</p>
  <a href="{% url 'pedidos:checkout_ok' pedido.id %}" class="btn btn-success">Simular éxito</a>
{% else %}
  <p>Redirigiendo a Stripe Checkout…</p>
  <script src="https://js.stripe.com/v3/"></script>
  <script>
    const stripe = Stripe("{{ STRIPE_PUBLIC_KEY }}");
    stripe.redirectToCheckout({ sessionId: "{{ session_id }}" });
  </script>
{% endif %}
{% endblock %}
